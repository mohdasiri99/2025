<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¬Ù„Ø³Ø© ÙƒÙˆØªØ´ÙŠÙ†Ø¬ Ø§Ø­ØªØ±Ø§ÙÙŠØ© â€“ GROW</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">

<style>
body{
  font-family:'Cairo',sans-serif;
  background:linear-gradient(135deg,#eef2ff,#f8fafc);
}
.step{display:none}
.step.active{display:block}
.btn{
  background:#4f46e5;
  color:white;
  padding:12px 28px;
  border-radius:14px;
  font-weight:800;
}
</style>
</head>

<body class="text-slate-800">

<div class="max-w-4xl mx-auto my-10 bg-white rounded-3xl shadow-2xl p-8">

<!-- TITLE -->
<h1 class="text-3xl font-extrabold text-center text-indigo-900 mb-4">
Ø¬Ù„Ø³Ø© ÙƒÙˆØªØ´ÙŠÙ†Ø¬ Ø§Ø­ØªØ±Ø§ÙÙŠØ© â€“ Ù†Ù…ÙˆØ°Ø¬ GROW
</h1>

<!-- TIMER -->
<div class="mb-8 bg-slate-100 rounded-xl overflow-hidden shadow-inner">
  <div class="flex justify-between items-center px-4 py-2 text-xs font-bold">
    <span>â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙÙŠ Ø§Ù„Ø¬Ù„Ø³Ø©</span>
    <span id="timeText">45:00</span>
  </div>
  <div class="h-2 bg-slate-200">
    <div id="timeBar" class="h-2 bg-emerald-500 transition-all duration-1000" style="width:100%"></div>
  </div>
</div>

<!-- STEP 1 -->
<div id="step1" class="step active">
<h2 class="text-xl font-extrabold text-indigo-700 mb-3">ğŸ¯ G â€“ Ø§Ù„Ù‡Ø¯Ù</h2>
<textarea id="goal" class="w-full border rounded-xl p-3" placeholder="Ù…Ø§ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ ØªØ­Ù‚ÙŠÙ‚Ù‡ØŸ"></textarea>
<input id="goalRate" type="number" min="1" max="10"
class="mt-3 border rounded-xl p-2 w-40" placeholder="Ø£Ù‡Ù…ÙŠØªÙ‡ 1â€“10">
<button onclick="nextStep(1)" class="btn mt-4">Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>

<!-- STEP 2 -->
<div id="step2" class="step">
<h2 class="text-xl font-extrabold text-indigo-700 mb-3">ğŸ” R â€“ Ø§Ù„ÙˆØ§Ù‚Ø¹</h2>
<textarea id="reality" class="w-full border rounded-xl p-3" placeholder="Ø£ÙŠÙ† Ø£Ù†Øª Ø§Ù„Ø¢Ù†ØŸ"></textarea>
<textarea id="challenges" class="w-full border rounded-xl p-3 mt-2" placeholder="Ù…Ø§ Ø§Ù„ØªØ­Ø¯ÙŠØ§ØªØŸ"></textarea>
<button onclick="nextStep(2)" class="btn mt-4">Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>

<!-- STEP 3 -->
<div id="step3" class="step">
<h2 class="text-xl font-extrabold text-indigo-700 mb-3">ğŸ’¡ O â€“ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª</h2>
<textarea id="options" class="w-full border rounded-xl p-3" placeholder="Ù…Ø§ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©ØŸ"></textarea>
<input id="bestOption" class="w-full border rounded-xl p-3 mt-2" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£Ù†Ø³Ø¨ Ø§Ù„Ø¢Ù†">
<button onclick="nextStep(3)" class="btn mt-4">Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>

<!-- STEP 4 -->
<div id="step4" class="step">
<h2 class="text-xl font-extrabold text-indigo-700 mb-3">ğŸš€ W â€“ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…</h2>
<input id="action" class="w-full border rounded-xl p-3" placeholder="Ø£ÙˆÙ„ Ø®Ø·ÙˆØ© Ø¹Ù…Ù„ÙŠØ©">
<input id="date" type="date" class="mt-2 border rounded-xl p-2">
<input id="commitment" type="number" min="1" max="10"
class="mt-2 border rounded-xl p-2 w-40" placeholder="Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… 1â€“10">

<textarea id="risk" class="w-full border rounded-xl p-3 mt-3"
placeholder="Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø³ÙŠØ­Ø¯Ø« Ù„Ùˆ Ù„Ù… ØªÙ†ÙØ°ØŸ"></textarea>

<button onclick="nextStep(4)" class="btn mt-4">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
</div>

<!-- SUMMARY -->
<div id="step5" class="step">
<h2 class="text-xl font-extrabold text-emerald-700 mb-4">ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ø¬Ù„Ø³Ø©</h2>

<div id="summary" class="text-sm space-y-2"></div>

<hr class="my-4">

<h3 class="font-bold">âœï¸ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</h3>
<input id="client" class="border rounded-xl p-2 w-full mt-2" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙÙŠØ¯">
<input id="coach" class="border rounded-xl p-2 w-full mt-2" placeholder="Ø§Ø³Ù… Ø§Ù„ÙƒÙˆØªØ´">

<p class="mt-3 text-xs text-slate-500">
ğŸ“… Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø¹Ø¯ 7 Ø£ÙŠØ§Ù…: <span id="followDate"></span>
</p>

<div class="flex gap-4 mt-6 flex-wrap">
<button onclick="downloadPDF()" class="btn bg-emerald-600">ØªØ­Ù…ÙŠÙ„ PDF</button>
<button onclick="saveSession()" class="btn bg-indigo-600">Ø­ÙØ¸ ÙÙŠ Ø³Ø¬Ù„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</button>
</div>

<p id="savedMsg" class="mt-3 text-green-600 font-bold hidden">
âœ”ï¸ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ù†Ø¬Ø§Ø­
</p>
</div>

</div>

<script>
/* -------- Steps Logic -------- */
function nextStep(n){
  let valid=true;
  document.querySelectorAll(`#step${n} textarea, #step${n} input`)
    .forEach(el=>{if(!el.value)valid=false});
  if(!valid){alert("ÙØ¶Ù„Ø§Ù‹ Ø£ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");return;}

  document.getElementById(`step${n}`).classList.remove("active");
  document.getElementById(`step${n+1}`).classList.add("active");

  if(n===4) buildSummary();
}

/* -------- Summary -------- */
function buildSummary(){
  summary.innerHTML=`
  <b>ğŸ¯ Ø§Ù„Ù‡Ø¯Ù:</b> ${goal.value}<br>
  <b>ğŸ“Š Ø£Ù‡Ù…ÙŠØªÙ‡:</b> ${goalRate.value}/10<br>
  <b>ğŸ” Ø§Ù„ÙˆØ§Ù‚Ø¹:</b> ${reality.value}<br>
  <b>âš ï¸ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª:</b> ${challenges.value}<br>
  <b>ğŸ’¡ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª:</b> ${options.value}<br>
  <b>ğŸš€ Ø§Ù„Ø®Ø·ÙˆØ©:</b> ${action.value}<br>
  <b>â— ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… Ø§Ù„ØªÙ†ÙÙŠØ°:</b> ${risk.value}
  `;
  const d=new Date();
  d.setDate(d.getDate()+7);
  followDate.textContent=d.toLocaleDateString('ar-SA');
}

/* -------- PDF -------- */
function downloadPDF(){
  html2pdf().from(document.querySelector(".max-w-4xl"))
  .save("Ø¬Ù„Ø³Ø©_ÙƒÙˆØªØ´ÙŠÙ†Ø¬_GROW.pdf");
}

/* -------- Save Session -------- */
function saveSession(){
  let log=JSON.parse(localStorage.getItem("growLog")||"[]");
  log.push({
    date:new Date().toLocaleDateString('ar-SA'),
    goal:goal.value
  });
  localStorage.setItem("growLog",JSON.stringify(log));
  savedMsg.classList.remove("hidden");
}

/* -------- TIMER -------- */
let totalTime=45*60;
let remaining=totalTime;

function startTimer(){
  setInterval(()=>{
    if(remaining<=0)return;
    remaining--;

    let m=Math.floor(remaining/60);
    let s=remaining%60;
    timeText.textContent=`${m}:${s.toString().padStart(2,"0")}`;

    let percent=(remaining/totalTime)*100;
    timeBar.style.width=percent+"%";

    if(remaining<=600){
      timeBar.className="h-2 bg-red-500 transition-all duration-1000";
    }else if(remaining<=1200){
      timeBar.className="h-2 bg-amber-400 transition-all duration-1000";
    }else{
      timeBar.className="h-2 bg-emerald-500 transition-all duration-1000";
    }
  },1000);
}
startTimer();
</script>

</body>
</html>
